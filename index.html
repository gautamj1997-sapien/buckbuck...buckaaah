<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üêì Chicken vs Crocodiles üêä</title>
<style>
  body {
    font-family: sans-serif;
    background: linear-gradient(to bottom, #87cefa, #fffacd);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 100vh;
    margin: 0;
    overflow: hidden;
  }
  h1 { margin: 10px; }
  #gameArea {
    position: relative;
    width: 300px;
    height: 500px;
    border: 2px solid #333;
    background: #87cefa;
    overflow: hidden;
    border-radius: 15px;
  }
  #nest {
    position: absolute;
    width: 80px;
    height: 40px;
    bottom: 400px;
    left: 110px;
    text-align: center;
    font-size: 2em;
  }
  .chicken {
    position: absolute;
    bottom: 10px;
    left: 130px;
    font-size: 2em;
    transition: left 0.1s, bottom 0.3s;
    opacity: 0;
  }
  .stone {
    position: absolute;
    width: 60px;
    height: 20px;
    background: #654321;
    border-radius: 5px;
  }
  .croc {
    position: absolute;
    width: 60px;
    height: 20px;
    background: green;
    border-radius: 5px;
    font-size: 1.2em;
    text-align: center;
    line-height: 20px;
    color: white;
  }
  #scoreBoard {
    margin-top: 5px;
    font-size: 1.2em;
    font-weight: bold;
  }
  #message {
    margin-top: 5px;
    font-size: 1em;
    color: #ff4500;
    text-align: center;
  }
  #countdown {
    position: absolute;
    top: 200px;
    width: 100%;
    text-align: center;
    font-size: 2em;
    font-weight: bold;
    color: #ff0000;
    display: none;
  }
  .bird {
    position: absolute;
    top: 50px;
    font-size: 1.5em;
    animation: fly 18s linear infinite;
    opacity: 0.7;
  }
  @keyframes fly {
    0% { left: -50px; top: 50px; transform: scaleX(1); }
    50% { top: 70px; }
    100% { left: 350px; top: 50px; transform: scaleX(1); }
  }
  canvas {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
  }
</style>
</head>
<body>

<h1>üêì Chicken vs Crocodiles üêä</h1>
<div id="gameArea">
  <div class="bird">üê¶</div>
  <div id="nest">ü•ö</div>
  <div class="chicken" id="chicken">üêì</div>
  <div id="countdown"></div>
</div>
<div id="scoreBoard">Score: 0</div>
<div id="message"></div>

<!-- Background forest sound (subtle loop) -->
<audio id="bgMusic" src="https://www.fesliyanstudios.com/play-mp3/387" loop></audio>

<!-- Celebration sound -->
<audio id="celebrationMusic" src="https://assets.mixkit.co/music/preview/mixkit-fairy-win-2016.mp3"></audio>

<canvas id="confettiCanvas"></canvas>

<script>
const gameArea = document.getElementById('gameArea');
const chicken = document.getElementById('chicken');
const nest = document.getElementById('nest');
const countdownEl = document.getElementById('countdown');
const scoreBoard = document.getElementById('scoreBoard');
const message = document.getElementById('message');
const music = document.getElementById('celebrationMusic');
const bgMusic = document.getElementById('bgMusic');
const canvas = document.getElementById('confettiCanvas');
const ctx = canvas.getContext('2d');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let chickenPos = 130;
let score = 0;
let stones = [];
let crocs = [];
let gameOver = false;
let level = 1;
let crocSpeed = 2;
let crocCount = 3;
let gameStarted = false;

// --- Create stones ---
for (let i = 0; i < 15; i++) {
  const stone = document.createElement('div');
  stone.classList.add('stone');
  let left = Math.random() * 240;
  stone.style.left = left + 'px';
  stone.style.bottom = (i * 30 + 40) + 'px';
  gameArea.appendChild(stone);
  stones.push(stone);
}

// --- Spawn crocodiles ---
function spawnCrocs(count) {
  crocs.forEach(c => gameArea.removeChild(c.el));
  crocs = [];
  for (let i = 0; i < count; i++) {
    const croc = document.createElement('div');
    croc.classList.add('croc');
    croc.style.left = Math.random() * 240 + 'px';
    croc.style.bottom = (i * 30 + 60) + 'px';
    croc.innerText = 'üêä';
    gameArea.appendChild(croc);
    crocs.push({el: croc, dir: Math.random() < 0.5 ? 1 : -1});
  }
}

// --- Intro animation: Egg cracks and chicken jumps ---
function startIntro() {
  nest.innerText = 'ü•ö';  
  setTimeout(() => {
    nest.innerText = 'ü•öüí•'; // Egg cracking effect
  }, 800);
  setTimeout(() => {
    nest.style.display = 'none';
    chicken.style.opacity = 1;
    chicken.style.bottom = '400px';
    jumpToStart();
  }, 1600);
}

// --- Chicken jumps down ---
function jumpToStart() {
  let bottom = 400;
  const jumpInterval = setInterval(() => {
    bottom -= 20;
    if(bottom <= 10) {
      bottom = 10;
      clearInterval(jumpInterval);
      startCountdown();
    }
    chicken.style.bottom = bottom + 'px';
  }, 80);
}

// --- Countdown before game start ---
function startCountdown() {
  let count = ['Ready', 'Steady', 'Go!'];
  let idx = 0;
  countdownEl.style.display = 'block';
  const countdownInterval = setInterval(() => {
    countdownEl.innerText = count[idx];
    idx++;
    if(idx >= count.length) {
      clearInterval(countdownInterval);
      countdownEl.style.display = 'none';
      gameStarted = true;
      bgMusic.volume = 0.3; // subtle
      bgMusic.play();
      spawnCrocs(crocCount);
      moveCrocs();
      checkScore();
    }
  }, 1000);
}

// --- Move chicken ---
document.addEventListener('keydown', e => {
  if(!gameStarted || gameOver) return;
  if(e.key === 'ArrowLeft' && chickenPos > 0) chickenPos -= 20;
  if(e.key === 'ArrowRight' && chickenPos < 240) chickenPos += 20;
  chicken.style.left = chickenPos + 'px';
});

// --- Move crocodiles ---
function moveCrocs() {
  if(gameOver || !gameStarted) return;
  crocs.forEach(c => {
    let left = parseFloat(c.el.style.left);
    left += c.dir * crocSpeed;
    if(left < 0 || left > 240) c.dir *= -1;
    c.el.style.left = left + 'px';

    if(Math.abs(left - chickenPos) < 30 && Math.abs(parseFloat(c.el.style.bottom) - parseFloat(chicken.style.bottom)) < 20) {
      gameOver = true;
      message.innerText = "üíÄ Oops! Crocodile got the chicken!";
      bgMusic.pause();
    }
  });
  if(!gameOver) requestAnimationFrame(moveCrocs);
}

// --- Confetti animation ---
const confettiParticles = [];
function createConfetti() {
  for(let i=0; i<200; i++){
    confettiParticles.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height - canvas.height,
      r: Math.random() * 6 + 4,
      d: Math.random() * 10 + 5,
      color: `hsl(${Math.random()*360}, 100%, 50%)`,
      tilt: Math.random()*10 - 10
    });
  }
}
function drawConfetti() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  confettiParticles.forEach(p => {
    ctx.beginPath();
    ctx.lineWidth = p.r / 2;
    ctx.strokeStyle = p.color;
    ctx.moveTo(p.x + p.tilt, p.y);
    ctx.lineTo(p.x + p.tilt, p.y + p.r);
    ctx.stroke();
    p.y += p.d;
    if(p.y > canvas.height) p.y = -10;
  });
  if(!gameOver) requestAnimationFrame(drawConfetti);
}

// --- Score tracking and progressive difficulty ---
function checkScore() {
  if(!gameStarted || gameOver) return;
  let chickenBottom = parseFloat(chicken.style.bottom);

  stones.forEach(stone => {
    let stoneBottom = parseFloat(stone.style.bottom);
    if(Math.abs(chickenBottom - stoneBottom) < 20) {
      score = stoneBottom;
      scoreBoard.innerText = "Score: " + Math.round(score/10);
    }
  });

  // Level up
  if(chickenBottom > level * 30) {
    level++;
    crocSpeed += 0.5;
    if(level % 3 === 0) crocCount++;
    spawnCrocs(crocCount);

    if(level === 5) {
      message.innerText = "üî• Winner gets Chicken dinner ü§§ü§§ü§§";
    } else {
      message.innerText = "‚ö° You're now getting dangerously close! Level " + level;
    }
    setTimeout(()=>message.innerText="", 2000);
  }

  // Winning condition
  if(chickenBottom >= 430) {
    gameOver = true;
    message.innerText = "üéâ Chicken safely crossed the river! Well done!";
    bgMusic.pause();
    music.play();
    createConfetti();
    drawConfetti();
  }

  if(!gameOver) requestAnimationFrame(checkScore);
}

// --- Start the game ---
startIntro();

</script>
</body>
</html>
